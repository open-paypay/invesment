<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Klaim Bonus - paypay</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<style>
    /* ðŸŒ¿ === Variabel Tema HIJAU PUTIH (Minimalis Konsisten) === ðŸŒ¿ */
    :root {
        --primary-green: #28a745; 
        --dark-green: #1e7e34; 
        --light-green: #e6f7eb; 
        --bg-light: #ffffff; 
        --bg-page: #F7F7F7; 
        --text-dark: #333333; 
        --text-muted: #888; 
        --border-color: #EFEFEF; 
        --shadow-subtle: 0 1px 3px rgba(0, 0, 0, 0.05);
        --shadow-deep: 0 6px 15px rgba(40, 167, 69, 0.25);
        --accent-gold: #FFD700; /* Tetap pakai emas untuk piala/penghargaan */
        --transition-speed: 0.1s; 
    }

    /* Styling Dasar dan Container */
    body { 
        font-family: 'Poppins', sans-serif; 
        margin:0; padding:0; 
        background: var(--bg-page); /* Background abu-abu muda */
        display:flex; 
        justify-content:center; 
        min-height:100vh; 
        color: var(--text-dark);
    }
    .app-container { 
        width:100%; max-width:450px; 
        margin:0 auto; 
        background: var(--bg-light); 
        flex-grow:1; 
        display:flex; 
        flex-direction:column; 
        box-shadow: none; /* Hilangkan shadow di container utama */
    }

    /* === Header Area (Putih Minimalis) === */
    .bonus-header { 
        background: var(--bg-light);
        color: var(--text-dark); 
        padding: 18px 20px; 
        display: flex; 
        align-items: center; 
        position: sticky; 
        top: 0; 
        z-index: 10;
        box-shadow: var(--shadow-subtle);
        border-bottom: 1px solid var(--border-color);
        border-bottom-left-radius:0; /* Hilangkan radius melengkung */
        border-bottom-right-radius:0; 
    }
    .bonus-header h2 { 
        font-size: 20px; 
        font-weight: 700; 
        margin: 0 auto; 
        text-align: center; 
        color: var(--dark-green); 
    }
    .back-button { 
        background: none; 
        border: none; 
        color: var(--text-dark); 
        font-size: 18px; 
        cursor: pointer; 
        position: absolute; 
        left: 20px; 
        padding: 0;
        transition: color var(--transition-speed);
    }
    
    /* === Main Content & Card === */
    .main-content { 
        padding: 20px; /* Tambah padding vertikal */
        flex-grow:1; 
        z-index:2; 
        margin-top: 0; /* Hilangkan efek menjorok */
    }
    
    /* Kartu Klaim (Light Green/Green Accent) */
    .claim-card { 
        background-color: var(--light-green); /* Warna kartu ringan */
        color: var(--text-dark); 
        padding:30px 20px; 
        border-radius:15px; 
        text-align:center; 
        box-shadow: var(--shadow-deep); /* Shadow hijau */
        border: 1px solid var(--primary-green);
    }
    .claim-card i.fa-trophy { 
        font-size:60px; 
        color:var(--accent-gold); /* Tetap emas untuk efek penghargaan */
        margin-bottom:15px; 
    }
    .claim-card h3 { 
        font-size:22px; 
        font-weight:700; 
        margin:0 0 5px 0;
        color: var(--dark-green);
    }
    .claim-card p { 
        font-size:14px; 
        color:var(--text-dark); 
        margin-bottom:30px; 
    }

    /* === Input Group === */
    .input-group { 
        margin-bottom:25px; 
        display:flex; 
        justify-content:center; 
    }
    .input-code { 
        width:250px; max-width:100%; 
        padding:12px 10px; 
        border:2px solid var(--primary-green); /* Border hijau */
        border-radius:10px; 
        background-color:var(--bg-light); 
        color:var(--dark-green); /* Teks hijau gelap */
        font-size:18px; 
        text-align:center; 
        letter-spacing:2px; 
        font-weight:700; 
        text-transform:uppercase; 
        outline:none;
        transition: border-color 0.2s, box-shadow 0.2s;
        box-shadow: var(--shadow-subtle);
    }
    .input-code::placeholder {
        color: var(--text-muted);
    }
    .input-code:focus {
        border-color: var(--dark-green);
        box-shadow: 0 0 8px rgba(40, 167, 69, 0.4);
    }

    /* === Button === */
    .btn-claim-bonus { 
        width:100%; 
        padding:14px; 
        background:var(--primary-green); /* Tombol hijau */
        color: var(--bg-light); /* Teks putih */
        border:none; 
        border-radius:8px; 
        font-size:16px; 
        font-weight:700; 
        cursor:pointer; 
        margin-top:10px;
        box-shadow: 0 4px 10px rgba(40, 167, 69, 0.3); 
        transition: background-color var(--transition-speed), transform var(--transition-speed), box-shadow var(--transition-speed);
    }
    .btn-claim-bonus:hover { 
        background-color: var(--dark-green); 
        transform: translateY(-1px); 
    }
    .btn-claim-bonus:active { 
        transform: translateY(0); 
    }
    .btn-claim-bonus:disabled { 
        background:#ccc; 
        color: #777;
        cursor:not-allowed; 
        box-shadow: none;
        transform: none;
    }

    /* === Info Area === */
    .info-area { 
        margin-top:30px; 
        text-align:center; 
        padding:15px; 
        font-size: 14px;
        color: var(--text-dark);
    }
    .info-area a { 
        color: var(--primary-green); 
        text-decoration:none; 
        font-weight:600; 
        font-size: 14px;
        display: block;
        margin-top: 10px;
        transition: color 0.1s;
    }
    .info-area a:hover {
        color: var(--dark-green);
    }
</style>
</head>
<body>

<div class="app-container">
    <header class="bonus-header">
        <button class="back-button" onclick="history.back()">
            <i class="fas fa-arrow-left"></i>
        </button>
        <h2>Klaim Bonus</h2>
    </header>

    <div class="main-content">
        <div class="claim-card">
            <i class="fas fa-trophy"></i>
            <h3>Selamat Datang!</h3>
            <p>Masukkan kode rahasia Anda di bawah ini untuk mengklaim hadiah eksklusif dari Indoreal.</p>

            <form id="bonusForm">
                <div class="input-group">
                    <input type="text" id="bonusCode" class="input-code" placeholder="KODE BONUS" required maxlength="20">
                </div>
                <button type="submit" class="btn-claim-bonus">AKTIFKAN BONUS SEKARANG</button>
            </form>
        </div>

        <div class="info-area">
            <p>Kode bonus dapat berupa saldo, poin, atau penawaran eksklusif.</p>
            <a href="https://t.me/paypay_cs1" target="_blank">Butuh Bantuan? Hubungi Layanan Pelanggan <i class="fas fa-headset"></i></a>
        </div>
    </div>
</div>

<script>
// Bagian SCRIPT TIDAK DIUBAH SAMA SEKALI
document.addEventListener("DOMContentLoaded", () => {
    const BONUS_LIST = {
      "PAYPAY_50": 50000,
        "PAYPAY_100": 100000,
        "PAYPAY_200": 200000,
        "PAYPAY_300": 300000,
        "PAYPAY_400": 400000,
        "PAYPAY_500": 500000,
        "PAYPAY_600": 600000,
        "PAYPAY_700": 700000,
        "PAYPAY_800": 800000,
        "PAYPAY_900": 900000,
        "PAYPAY_1000": 1000000
    };

    const form = document.getElementById("bonusForm");
    const input = document.getElementById("bonusCode");

    let users = JSON.parse(localStorage.getItem("users")) || [];
    let activeUser = JSON.parse(localStorage.getItem("activeUser"));

    if(!activeUser){
        window.location.href = "login.html";
        return;
    }

    let index = users.findIndex(u => u.phone === activeUser.phone);
    if(index === -1){
        window.location.href = "login.html";
        return;
    }

    users[index].balance = users[index].balance ?? 0;
    users[index].claimedCodes = users[index].claimedCodes ?? [];

    // Ambil saldo global untuk beranda
    let saldoAkun = Number(localStorage.getItem("saldoAkun")) || 0;

    form.addEventListener("submit", (e)=>{
        e.preventDefault();
        const code = input.value.trim().toUpperCase();

        if(!BONUS_LIST[code]){
            alert("Kode salah atau tidak valid!");
            return;
        }

        if(users[index].claimedCodes.includes(code)){
            alert("Kode sudah diklaim sebelumnya!");
            return;
        }

        const amount = BONUS_LIST[code];
        // Tambahkan ke balance user
        users[index].balance += amount;
        // Tandai kode sudah diklaim
        users[index].claimedCodes.push(code);
        activeUser = users[index];

        // Tambahkan juga ke saldo global beranda
        saldoAkun += amount;

        // Simpan ke localStorage
        localStorage.setItem("users", JSON.stringify(users));
        localStorage.setItem("activeUser", JSON.stringify(activeUser));
        localStorage.setItem("saldoAkun", saldoAkun);

        alert(`Bonus berhasil diklaim +Rp${amount.toLocaleString()}`);
        window.location.href = "profil.html"; // Kembali ke profil
    });
});
</script>

</body>
</html>